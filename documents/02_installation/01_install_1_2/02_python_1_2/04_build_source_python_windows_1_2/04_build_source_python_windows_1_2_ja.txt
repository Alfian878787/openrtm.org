// Title: ソースからのビルド(Windows編)
#contents

Windows上でソースパッケージからインストールしたい場合、OpenRTM-aist-Pythonを自分でビルドする必要があります。

**ビルド環境
-Python
-omniORBpy
-Doxgen

が必要です。以下に入手方法を説明しますのでインストールしてください。

*** Python
Python 2.7(もしくは3.6、3.7)が必要です。以下のサイトから最新のものを取得しインストールしてください。

-[[Python Official Website:https://www.python.org/]] 

以降の説明は、次の2つの前提の元書いています。(そのはかのインストール設定はインストーラのデフォルト設定)
-インストール先がC:\PythonX.Y(X.Yは2.7か3.6か3.7をインストールするPythonに合わせて設定してください。Python3.7では[Customize Installation]を選択する必要があります)。
-サーチパスにPythonの実行ファイルがある場所が含まれていること(3.7では[Add Python to environmental variable]にインストール中にチェックをいれれば、インストーラが設定してくれます。)

*** omniORBpy

OpenRTM-aist-PythonのビルドにはomniORBpyのライブリが必要です。omniORBpyは以下のリンクから、必要なファイルを入手できます。

-[[OpenRTM.orgサイト:https://openrtm.org/pub/omniORB/win32/]]

また、公式サイトからはソースが入手できます。
-[[omniORB official:http://omniorb.sourceforge.net/]]
--[[sourceforge download page:http://sourceforge.net/projects/omniorb/files/omniORBpy/]]

openrtm.orgのサイトのファイルは、特別な理由がない限りは最新版(現時点では4.2.3)を使用することを推奨します。また、複数のファイルがありますが、そのファイル名の意味は以下となりますので、その説明にあわせて使用するファイルを選択してください。

**** openrtm.orgからダウンロードできるomniORBパッケージのファイル名の意味

ファイル名の書式は:

omniORB-x.y.z-{win32|x64}-{vc100|vc110|vc120|vc140}-{py27|py36|py37}.zip

ここで、

- omniORBのバージョン
-- x.y.z: omniORBのバージョン、例えば4.2.3。
- Windowsビット数
-- win32:32ビット版、32ビット版のPythonを使う場合
-- x64: 64ビット版、64ビット版のPythonを使う場合
- Visual Studio のバージョン
-- vc100: C++環境を使う場合で、Visual Studio 2010の場合
-- vc110: C++環境を使う場合で、Visual Studio 2012の場合
-- vc120: C++環境を使う場合で、Visual Studio 2013の場合
-- vc140: C++環境を使う場合で、Visual Studio 2015/2017/2019の場合
-- Python環境だけで使う場合は、どれを選んでもかまいません。
- Pythonバージョン
-- py27: Python 2.7を使う場合
-- py36: Python 3.6を使う場合
-- py37: Python 3.7を使う場合

omniORB 4.2.3を64bitのPython 3.7の環境で使用するなら、omniORB-4.2.3-x64-vc140-py37.zipをダウンロードします。ファイルをダウンロードしたしZIPファイルを展開すると、以下の様なディレクトリツリーが展開されます。それぞれのディレクトリー下のファイルを以下の指示通りに Python のディレクトリーにコピーしてください。

**** omniORBのファイルのインストールの仕方

なお、omniORBpy のバージョンを x.y, Python のバージョンを X.Y として記述しています。

 + omniORBpy-x.y
  + bin
    + x86_win32 -> exe, dllともに C:\PythonXY 直下へ
  + doc -> 削除してもよい
  + examples -> 削除してもよい
  + idl -> 削除してもよいが C:\PythonXY\Lib\site-packages\omniORB\idl 以下においておいてもよい
  + lib
    + python -> 以下のディレクトリとファイルを丸ごと C:\PythonXY\Lib\site-packages 直下へ
    + x86_win32 -> .pyd を C:\PythonXY\Lib\site-packages 直下へ

*** Doxygen
- [[Doxygen:http://www.doxygen.nl/download.html]]
のWebページからWindows版のバイナリ実行形式ファイルをダウンロードして実行してインストールしてください。

//------------------------------------------------------------
**　ソースパッケージの取得

まず下記リンクよりソースコードファイルOpenRTM-aist-Pythoon-1.2.x.zipをダウンロードし、適当なディレクトリーに展開します。

- [[OpenRTM-aist-Python-1.2.0:https://github.com/OpenRTM/OpenRTM-aist-Python/releases/tag/v1.2.0/]]

** ビルド

コマンドプロンプトを起動し、先程ソースコードを展開したフォルダーに移動後、以下のコマンドにてビルドを行います。

 > python setup.py build


** インストール
すべてが正しくビルドできたら、以下のコマンドにてインストールを完了させます。

 > python setup.py install

以上で、OpenRTM-aist のインストールは終了です。



