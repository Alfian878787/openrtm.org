#contents

ここでは、作成したRTCを複数組み合わせて, システムを構築する手法について
説明します。

** ネームサービス

分散オブジェクトミドルウエアは、任意の場所の計算機上のオブジェクトに対
して参照を保持する代理オブジェクトを介して透過的アクセスを提供します。
この参照はCORBAでは IOR (Interoperable Object Reference) と呼ばれ、実体
はオブジェクトが存在する計算機のアドレスやポート、オブジェクト固有のキー
等がエンコードされたものです。 あるオブジェクトのIORを別の計算機上のプ
ログラムから利用する方法としては、ネットワーク上のサーバ上に登録する方
法があります。この参照を登録したり取得したりするサービスがネームサービ
スです。ネームサービスはCORBAで標準的に定義されているサービスの一つであ
り、OpenRTM-aistでは、''rtm-naming'' というラッパーコマンドが提供されて
います。

システムを起動する前に、RTCを登録するネームサーバを起動させる必要があり
ます。また、各RTCに対しては、ネームサーバの場所を設定ファイル
''rtc.conf'' に記載して予め与える必要があります。例えば、ネームサーバを
ホスト名''openrtm.mydomain.net'' 上で起動した場合、全てのRTCには、以下
のように記載した rtc.conf を与える必要があります。

 corba.nameservers: openrtm.mydomain.net

また、ネームサーバはIPアドレスでも与えることができ、'',''で区切ることで
複数のサーバに同時にRTCを登録することができます。ネームサーバは、通常長時
間起動したままでよく、システムにおいて固定的であるので、設定ファイルを
頻繁に書き換える必要はありません。

** RTSystemEditorによるシステム構築

作成されたいくつかのRTCを実行し、それらのポートを接続し、アクティブ化す
ることでシステムが動作します。RTC同士の接続やRTCに対してアクティブ化や非
アクティブ化のコマンドを送りシステムを起動するためのツールとして
RTSystemEditorが提供されているます。

#ref(rtse_ja.png,40%,center)
CENTER: ''RTSystemEditorによるシステム構築''

RTCは起動されると、図左の ネームサービスビューに現れます。 ネームサービ
スビュー上のRTCを中央のエディタにドラッグアンドドロップすると、RTCがシ
ステムエディタ内に示されるアイコンで表示されます。 長方形の辺上の凸部が
ポートを表しており、これらRTC間のポートを接続することでシステムを構築し
ます。また、画面中央下部にはRTCのコンフィギュレーションビューが表示され
ており、ここで任意のRTCのパラメータを編集することができるようになってい
ます。

システムを構築したら、エディタ上で右クリックし ''All Activate'' を選択
することで、全てのRTCをアクティブ化することが可能です。また、エディタ上
で右クリックし、 ''Save as'' を選択することで、システムの構成情報を保存
することができます。保存したシステム構成情報は、再度呼び出すことでシステ
ムの接続情報、コンフィギュレーションの情報等を復元することが可能です。

現在のところ、システム構成情報を復元する際には予めRTCを起動しておく必要
がありますが、将来的にはRTCの起動から接続復元までが自動で行えるようにな
る予定です。
