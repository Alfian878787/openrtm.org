#contents
**画面構成要素 
ここでは、 RTCBuilder 内の画面構成要素について説明します。
***概要
RTCBuilder では、以下のような画面構成となっています。
#br

#ref(fig3-1RTCBuilder.png,nolink,center)
CENTER:''RTC Builder の画面構成要素''

CENTER:''画面要素一覧''
|№|画面要素名|説明|
|１|RTC プロファイルエディタ|RT コンポーネントの仕様であるプロファイル、データポート定義、サービスポート定義、コンフィギュレーション定義、その他拡張プロファイルを編集します。|
|２|ビルドビュー|編集中の RT コンポーネントおよびデータポート、サービスポート、サービスインターフェースをアイコンでグラフィカルに表示します。|
|３|リポジトリビュー|選択した RT リポジトリの情報を表示します。|

*** RT プロファイルエディタ
ここでは、 RT プロファイルエディタについて説明します。
#br

#ref(fig3-2RTProfileEditor.png,nolink,center)
CENTER:''RT プロファイルエディタ''
#br
　RTプロファイルエディタは、以下のページから構成されています。
CENTER:''RT プロファイルエディタ構成''
|№|画面要素名|説明|
|１|基本プロファイル入力ページ|RT コンポーネントのプロファイル情報など、コンポーネントの基本情報を入力します。|
|２|データポート・プロファイル入力ページ|RT コンポーネントに付属するデータポートのプロファイルを入力します。|
|３|サービスポート・プロファイル入力ページ|RT コンポーネントに付属するサービスポートおよびサービスポートに付属するサービスインターフェースのプロファイルを入力します。|
|４|コンフィギュレーション・プロファイル入力ページ|RT コンポーネントに設定するユーザ定義のコンフィギュレーション・パラメータセット情報およびシステムのコンフィギュレーション情報を入力します。|
|５|言語・環境情報入力ページ|生成対象のコード選択や OS などの実行環境に関する情報を入力します。|
|６|RTC プロファイル XML 編集ページ|設定された RT コンポーネント・プロファイルを記述した XML の表示・編集を行います。|
|７|ドキュメント情報設定ページ|生成対象の RT コンポーネントに追加する各種ドキュメント情報を入力します。|
各ページの切り替えは、エディタ画面下部のタブを選択することで行うことができます。
****基本プロファイル入力ページ 
RT コンポーネントのプロファイル情報など、コンポーネントの基本情報を入力するページです。
#br

#ref(fig3-3InputBaseProfile.png,nolink,center)
CENTER:''基本プロファイル入力ページ''
#br
以下に各入力項目について説明いたします。
CENTER:''基本プロファイル入力ページ　項目説明''
|項目|デフォルト値|説明|
|>|>|RT-Component Basic Profile|
|Module name|ModuleName|RT コンポーネントを識別する名前です。必須入力項目。この名前は、生成されるソースコード中で、コンポーネントの名前に使用されます。英数字でなければなりません。|
|Module description|ModuleDescription|RT コンポーネントの簡単な概要説明です。省略可能項目。|
|Module version|1.0.0|RT コンポーネントのバージョンです。原則 x.y.z のような形式でバージョン番号を入力します。省略可能項目|
|Module vender|VenderName|RT コンポーネントを開発したベンダ名です。省略可能項目|
|Module category|Category|RT コンポーネントのカテゴリです。必須入力項目|
|Component type|DataFlowComponent|RT コンポーネントの型です。 DataFlowComponent、STATIC、UNIQUE、COMMUTATIVE から選択可能です。|
|Component’s activity type|PERIODIC|RTコンポーネントのアクティビティタイプです。 PERIODIC、SPORADIC、EVENT_DRIVEN から選択可能です。|
|Number of maximum instance|1|RT コンポーネント　インスタンスの最大数です。自然数を入力してください。省略可能項目|
|Execution type|PeriodicExecutionContext|ExecutionContextの型です。 PeriodicExecutionContext、ExtTrigExecutionContext から選択可能です。|
|Execution Rate|1.0|ExecutionContextの実行周期です。単位Hz。正の double 型の数値が入力可能です。省略可能項目|
|>|>|Output Project|
||なし|生成コードの出力対象プロジェクト名です。設定したプロジェクトが存在する場合には、そのプロジェクト内に、設定したプロジェクトが存在しない場合には、新規プロジェクトを生成します。必須入力項目|
****データポート・プロファイル入力ページ 
RT コンポーネントに付属するデータポートの情報を入力するページです。
#br

#ref(fig3-4InputDataPort.png,nolink,center)

CENTER:''データポート・プロファイル入力ページ''
#br
　各ポート (InPort/OutPort) を新規に追加する場合は、各セクションの｢ Add ｣ボタンを押してください。
　また、各セクションの「 Delete 」ボタンを押すと、選択中のポートを削除することができます。
　ドキュメントセクションの内容はポート毎に設定することが可能です。ドキュメントセクションには、選択中のポートに対応した内容が表示されます。
　以下に各入力項目について説明いたします。
CENTER:''データポート・プロファイル入力ページ　項目説明''
|項目|デフォルト値|説明|
|>|>|RT-Component Data InPort Profile|
|Port name|dp_name|Data InPort の名称です。必須入力項目。半角英数字のみ入力可能です。 Data OutPort と併せてポート名称は重複することができません。|
|Data Type|dp_type|Data InPort が扱うデータ型です。Timed[ Short / Long / UShort / ULong / Float / Double / Char / Boolean / Octet / String ] およびそのシーケンス型が使用可能です。必須入力項目。|
|Var Name|dp_vname|Data InPort に対応する変数名です。省略可能項目|
|Disp. Position|left|ビルドビュー内でのData InPortの表示位置です。|
|>|>|RT-Component Data OutPort Profile|
|Port name|dp_name|Data OutPort の名称です。必須入力項目。半角英数字のみ入力可能です。Data InPortと併せてポート名称は重複することができません。|
|Data Type|dp_type|Data OutPort が扱うデータ型です。 Timed[ Short / Long / UShort / ULong / Float / Double / Char / Boolean / Octet / String ] およびそのシーケンス型が使用可能です。必須入力項目。|
|Var Name|dp_vname|Data OutPort に対応する変数名です。省略可能項目|
|Disp. Position|right|ビルドビュー内での Data OutPort の表示位置です。|
|>|>|Documentation|
|概要説明|なし|データポートに対する概要説明。省略可能項目。|
|データ型|なし|データポートの扱う型に対する説明。省略可能項目。|
|データ数|なし|データが配列になる場合など、データ数に関する説明。省略可能項目。|
|意味|なし|データの意味の説明。省略可能項目。|
|単位|なし|データ単位に関する説明。省略可能項目。|
|発生頻度，周期|なし|データの発生頻度、周期に関する説明。省略可能項目。|
|処理速度，周期|なし|データの処理速度、処理周期に関する説明。省略可能項目。|

****サービスポート・プロファイル入力ページ 
RT コンポーネントに付属するサービスポートの情報を入力するページです。
#br

#ref(fig3-5InputServcePort.png,nolink,center)
CENTER:''サービスポート・プロファイル入力ページ(サービスポート情報入力)''
#br
#br

#ref(fig3-6InputServcePort2.png,nolink,center)
//CENTER:''図 3-6 サービスポート・プロファイル入力ページ(サービスインターフェース情報入)''
CENTER:''サービスポート・プロファイル入力ページ(サービスインターフェース情報入力)''
#br

　新規サービスポートは、画面左側「 RT-Component Service Ports 」欄の｢ Add Port ｣を選択することで追加することができます。
画面左側「 RT-Component Service Ports 」にてサービスポートを選択した状態で、｢Add Interface ｣を選択することで新規サービスインターフェースを追加することができます。
画面左側「 RT-Component Service Ports 」にて、サービスポートもしくはサービスインターフェースを選択した状態で「 Delete 」を選択することで、選択したポート／インターフェースを削除することができます。
以下に各入力項目について説明いたします。
CENTER:'' サービスポート・プロファイル入力ページ　項目説明(サービスポート)''
|項目|デフォルト値|説明|
|>|>|RT-Component Service Port Profile|
|Name|sv_name|サービスポートの名称です。必須入力項目。半角英数字のみ入力可能です。サービスポート名称は重複することができません。|
|Position|left|ビルドビュー内でのサービスポートの表示位置です。|
|>|>|Documentation|
|概要説明|なし|サービスポートに対する概要説明。省略可能項目。|
|I/F概要説明|なし|サービスポートに付属するサービスインターフェースの概要説明。省略可能項目。|

CENTER:'' サービスポートプロファイル入力ページ　項目説明(サービスインターフェース)''

|項目|デフォルト値|説明|
|>|>|RT-Component Service Port Interface Profile|
|Interface Name|if_name|サービスインターフェースの名称です。必須入力項目。半角英数字のみ入力可能です。サービスインターフェース名は重複することができません。|
|Direction|Provided|サービスインターフェースの種類です。 &br; ・Provided：提供インターフェース (Service Provider 用 ) &br; ・Required：要求インターフェース (Service Consumer用)  &br; から選択可能です。|
|Instance Name|if_instance|サービスインターフェースのインスタンス名です。必須入力項目。半角英数字のみ入力可能です。|
|Var Name|if_varname|サービスインターフェースの変数名です。省略可能項目。省略された場合は、インスタンス名を使用します。|
|IDL file|なし|サービスインターフェースで使用する IDL ファイル名を指定します。｢ Browse... ｣ボタンをクリックすると、ファイル選択ダイアログが表示されます。|
|Interface Type|なし|サービスインターフェースで使用するサービスの型です。必須入力項目。半角英数字のみ入力可能です。|
|IDL Path|なし| IDL のサーチパスです。｢ Browse... ｣ボタンをクリックすると、ディレクトリ選択ダイアログが表示されます。|
|>|>|Documentation|
|概要説明|なし|サービスインターフェースに対する概要説明。省略可能項目。|
|引数|なし|サービスインターフェースの引数に関する説明。省略可能項目。|
|戻り値|なし|サービスインターフェースの戻り値に関する説明。省略可能項目。|
|例外|なし|サービスインターフェースの例外に関する説明。省略可能項目。|
|事前条件|なし|サービスインターフェースのオペレーションを実行前に満たしておくべき事前条件に関する説明。省略可能項目。|
|事後条件|なし|サービスインターフェースのオペレーションを実行後に満たす事後条件に関する説明。省略可能項目|


****言語・環境情報入力ページ 
入力した RT コンポーネント仕様に基づき生成するテンプレート・ソースコードの言語選択や、OS 等の実行環境、依存ライブラリなどを入力するページです。
#br

#ref(fig3-8InputLangEnv.png,nolink,center)
CENTER:''言語・環境情報入力ページ''
#br

　生成対象の言語ごとにセクションが分かれています。生成したい言語のセクションを選択し、各言語固有の設定情報を入力してください。
あるセクションを選択した場合には、他のセクションは全て閉じるようになっています。
コード生成実行時（基本プロファイル入力ページの｢ Generate ｣ボタン押下時）に選択されていたセクションの言語用テンプレートコードが生成されます。
以下に各入力項目について説明いたします。
CENTER:'' 言語・環境情報入力ページ　項目説明''
|項目|デフォルト値|説明|
|>|>|C++|
|OS|なし|生成対象の OS を選択してください。|
|Dependency|なし|生成する RT コンポーネントが依存するライブラリを入力します。|
|>|>|Python|
|---|---|---|
|>|>|Java|
|Jar File|なし|生成する RT コンポーネントが依存するJarファイルを入力します。|

　Java セクションの Jar File の追加/削除は、セクション横の｢ Add ｣｢ Delete ｣ボタンにて行うことができます。｢Add｣ボタンをクリックすると，一覧中に項目行が追加されます。そして、追加された行をクリックすると、ファイル選択ダイアログが表示されるますので対象ファイルを選択してください。
~''※'' Ruby および C# については、現状では未対応です。

**** RTC プロファイル XML 編集ページ
入力した RT コンポーネント仕様を記した XML ファイル (RTC.xml) の内容確認、編集を行うページです。他のページで設定した内容を確認したり、GUI 画面からは入力できない項目を直接編集するために使用します。
#br

#ref(fig3-9InputLangEnv2.png,nolink,center)
CENTER:''言語・環境情報入力ページ''
#br

　このページで直接入力した内容は、このページを表示している状態で保存した場合のみ保存されます。このページにて内容編集後、他ページを開いた状態で保存すると、他のページにて入力した項目が優先されます。
このページの内容を保存する場合には、RTC.xml のスキーマ定義に従ったバリデーションが行われます。バリデーション時にエラーが発見された場合は、以下のようなエラーメッセージが表示されますので、表示内容を参考に該当箇所を修正してください。
#br

#ref(fig3-10ErrorXML.png,nolink,center)
CENTER:''XML バリデーションエラーの例''
#br

****ドキュメント情報設定ページ
生成対象の RT コンポーネントに関する各種ドキュメント情報を入力します。
#br

#ref(fig3-11SettingDoc1.png,nolink,center)
CENTER:''ドキュメント情報設定ページ １''
#br

#ref(fig3-12SettingDoc2.png,nolink,center)
//CENTER:''図 3-12 ドキュメント情報設定ページ ２''
CENTER:''ドキュメント情報設定ページ ２''
#br
このページで入力された情報は、生成されたコードにdoxygen形式で埋め込まれます。
以下に各入力項目について説明いたします。
CENTER:''ドキュメント情報設定ページ　項目説明''
|項目|デフォルト値|説明|
|>|>|コンポーネント概要|
|概要説明|なし|生成する RT コンポーネントの概要説明。省略可能項目。|
|入出力|なし|RT コンポーネントの入出力に関する概略説明。省略可能項目。|
|アルゴリズムなど|なし|RT コンポーネントが使用しているアルゴリズムなどの説明。省略可能項目。|
|>|>|Activity (on_initialize，on_finalize，on_startup，on_shutdown，on_activated，on_deactivated，on_execute，on_aborting，on_error，on_reset，on_state_update，on_rate_changed)|
|動作概要|なし|各アクション内での動作に関する概要説明。省略可能項目。|
|事前条件|なし|各アクション実行前に成立すべき事前条件に関する説明。省略可能項目。|
|事後条件|なし|各アクション実行後に成立している事後条件に関する説明。省略可能項目。|
|>|>|その他|
|作成者・連絡先|なし|RT コンポーネントの作成者および連絡先に関する情報。省略可能項目。|
|ライセンス，使用条件|なし|RT コンポーネントのライセンス情報、使用条件に関する情報。省略可能項目。|
|参考文献|なし|参考文献。省略可能項目。|

***ビルドビュー 
ビルドビューは作成中の RT コンポーネントの設定内容をグラフィカルに表示するためのビューです。
ビルドビューの表示例を以下に示します。
#br

#ref(fig3-13BuildView.png,nolink,center)
CENTER:''ビルドビュー''
#br

　ビルドビュー内には、設定したRTコンポーネントの名称、データポート (InPort/OutPort) の数・名称、サービスポートの数・名称、サービスインターフェースの数・名称が表示されます。
また各ポートは、各設定画面で設定した表示位置に表示されます。

****ビルドビューの表示 
｢ RTCBuilder ｣パースペクティブ切り替え時にビルドビューが表示されていない場合、以下の手順にて表示することができます。
画面上部のメニューから[ウィンドウ]－[ビューの表示]－[その他]を選択。表示された｢ビューの表示｣画面にて、｢その他｣－｢BuildView｣を選択。
#br

#ref(fig3-14DispBuildView.png,nolink,center)
CENTER:''ビルドビューの表示''
#br

***リポジトリビュー
　リポジトリビューは、RT コンポーネント仕様記述ファイルを読み込み、ツリービューで表示する機能をもっています。
またリポジトリビューには、大きく分けて、ローカルに存在する仕様記述ファイルを直接読み込む機能と、リモートに存在する RT リポジトリに接続し、リポジトリ内の情報をツリー表示する機能があります。

****リポジトリビューの表示
メニューの''「ウィンドウ(W)」''から''「ビューの表示(V)」''を選択し、''「その他(O)」''を押下します。
#br

#ref(fig1-3SelectRepositoryView.png,nolink,center)
//CENTER:''図 1-3 リポジトリビューの選択''
CENTER:''リポジトリビューの選択''
#br
「RepositoryView」を選択することで、リポジトリビューが起動します。
#br

#ref(fig1-4RepositoryViewInit.png,nolink,center)
CENTER:''リポジトリビューの初期起動時画面''


****ローカル版の概要 
ローカルに存在する RT コンポーネント仕様記述ファイルを読み込み、ツリービューで表示する機能です。
#br

#ref(fig2-1RepositoryViewLocal.png,nolink,center)

//CENTER:''図 2-1 RTC-RepositoryView（ローカル仕様記述読込時）''
CENTER:''リポジトリビュー（ローカル仕様記述読込時）''

****ファイルのロード 
　ここでは、リポジトリビューに RT コンポーネント仕様記述ファイルを指定して表示する方法の説明を行います。
リポジトリビュー内で右クリックし、表示されるコンテクストメニューから「 Load File 」を選択すると、ファイル選択ダイアログが表示されます。ここでリポジトリビューに読み込む RT コンポーネント仕様記述ファイルを選択します。
このダイアログは xml ファイルのみ表示するようフィルタがかかります。
#br

#ref(fig2-1LoadFile.png,nolink,center)
CENTER:''ファイルのロード''
#br

　ローカルに存在する RT コンポーネント仕様記述ファイルを読み込んだ場合、最上位階層は読み込んだ RT コンポーネント仕様記述ファイルの絶対パスを表示します。そして、２階層目は RT コンポーネント仕様記述ファイル内で定義されている category 属性の値を表示します。また３階層目は RT コンポーネント仕様記述ファイル内の name 属性に記述されている値と RT コンポーネント仕様記述ファイル名を表示します。

　すでにリポジトリビューに読み込まれているパスと同一のパスから RT コンポーネント仕様記述ファイルを読み込んだ場合、現在のパス以下に category とコンポーネント名を展開します。パスと同様、同一の category が展開されている場合、 category 以下にコンポーネント名とファイル名を展開します。
#br

#ref(fig2-3LoadFile2.png,nolink,center)
CENTER:''ファイルのロード後（同一パス、同一categoryで展開）''
#br

****ディレクトリのロード 
　ここでは、 RT コンポーネント仕様記述ファイルが存在するディレクトリを指定して、ディレクトリ内の全ファイルの読み込み、表示を行う方法を説明します。
リポジトリビュー上で右クリックし、表示されるコンテクストメニューから「 Load Dir 」を選択すると、ディレクトリ選択ダイアログが表示されます。リポジトリビューに読み込むディレクトリを選択します。ディレクトリ以下に存在する RT コンポーネント仕様記述ファイルを読み込みます。
#br

#ref(fig2-5LoadDir.png,nolink,center)
CENTER:''ディレクトリのロード後''
#br

　表示方法はファイルのロードと同様です。
すでに展開したディレクトリに新しい RT コンポーネント仕様記述ファイルを追加し、再度読み込みを行うと追加された RT コンポーネント仕様記述ファイルのみ読み込まれます。

****削除
　リポジトリビューのコンポーネントは、リポジトリビュー上で右クリックし、コンテクストメニューから「Delete」を選択すると、削除することが可能です。
「 Delete 」はパス、 category 、コンポーネントのいずれかを選択している場合のみ選択できます。
#br

#ref(fig2-6Delete.png,nolink,center)
CENTER:''削除''
#br

　最上位階層であるパスを削除すると、下位の category 、コンポーネントも同時に削除されます。また３階層目のコンポーネントを削除し、他のコンポーネントが存在しない場合は再帰的に最上位階層まで削除されます。



